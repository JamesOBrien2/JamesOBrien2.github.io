---
layout: post
title: A post about performing NCI plots for MacOS
date: 2025-09-05 14:10:00
description: This is a post describing the steps needed to succesfully perform an NCI plot on a MacOS system.
tags: Analysis, Tutorial
categories: tutorials
---


# NCI Plots

Guide for creating NCI plots using Multiwfn and VMD on MacOS systems.

### Requirements

- ORCA (https://www.faccts.de/docs/orca/6.1/manual/)
- Multiwfn (https://github.com/digital-chemistry-laboratory/homebrew-multiwfn)
- VMD (https://www.ks.uiuc.edu/Development/Download/download.cgi?PackageName=VMD)

---

### Recommendations

- Define `orca_2mklpath` parameter in `settings.ini`. This allows you to skip steps 2, 3, and 4 below.
  - To do this: (1) set environment variable `Multiwfnpath=${HOMEBREW_PREFIX}/etc/multiwfn` (2) Set the `orca_2mklpath` parameter in `${HOMEBREW_PREFIX}/etc/multiwfn/settings.ini` to your `orca_2mkl` path

### Creation of the Cube Files

1. Run ORCA calculation to generate .gbw file

---

Following steps [x] required only if you have not defined orca_2mklpath in settings.ini

[2.] Convert .gbw to .wfx
   - One way to do this is to use `orca_2mkl` --> `orca_2mkl -molden filename` to generate .molden.input file
[3.] If using pseudopotentials: Edit .molden.input to include orca in title line
   - Example:
     ```
     [Title]
     orca
     [Molden Format]
     ...
     ```
[4.] Use Molden2Aim software or Multiwfn to convert .molden to .wfx

   - Using Multiwfn: `multiwfn filename.molden` --> Select option 19 (Generate wavefunction file) --> Select option 4 (.wfx format)

---


5. Use Multiwfn to generate NCI plot (20 1 3 3 0 0)
   - Use High-Quality Grid when possible.
   - Important files are `func1.cub` and `func2.cub`


---

### Visualisation using VMD

The goal of the following steps are to have the `func1.cub` and `func2.cub` files in the same folder as the RDGfill.vmd script. Once this is done you just need to source the RDGfill.vmd script through the terminal provided by VMD.

6. Copy `RDGFill.vmd` over to your folder with your `.cub` files
7. Execute `/Applications/VMD\ 2.0.0a7-pre2.app/Contents/MacOS/VMDlauncher`
8. In VMD terminal run `cd /path/to/calculation/folder`
9. In VMD terminal run `source /path/to/calculation/folder/RDGfill.vmd`

If having issues with reading the .cub files, make sure they are named func1.cub and func2.cub and in the same folder folder as RDGfill.vmd.

---

